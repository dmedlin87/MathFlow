
> mathflow@0.0.0 test
> vitest src/domain/skills/grade4/oa.test.ts


[1m[44m DEV [49m[22m [34mv4.0.15 [39m[90mC:/Users/dmedl/Projects/MathFlow[39m

 [31mÎ“Â¥Â»[39m src/domain/skills/grade4/oa.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 9[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates List Factors problems correctly[32m 2[2mms[22m[39m
       [32mÎ“Â£Ã´[39m covers perfect squares in getFactors[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates Prime/Composite problems (Prime case)[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates Prime/Composite problems (Composite case)[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m triggers FactorsMultiples misconceptions[32m 0[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m generates Multiples problems (Mode C)[39m[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates valid additive sequence[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates valid subtract sequence[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates valid comparison word problems and covers misconception[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates arithmetic mode problems[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates remainder interpretation problems and covers misconception[32m 0[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/domain/skills/grade4/oa.test.ts > grade4-oa generator > FactorsMultiplesGenerator > generates Multiples problems (Mode C)
AssertionError: expected 'Is the number **6** Prime or CompositÎ“Ã‡Âª' to contain 'multiple of'

Expected: "multiple of"
Received: "Is the number **6** Prime or Composite?"

 Î“Â¥Â» src/domain/skills/grade4/oa.test.ts:111:41
    109|       const rng = createMockRng([0.8, 0.1, 0.1]);
    110|       const item = FactorsMultiplesGenerator.generate(0.1, rng);
    111|       expect(item.problem_content.stem).toContain("multiple of");
       |                                         ^
    112|     });
    113|   });

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[90m (11)[39m
[2m   Start at [22m 12:22:24
[2m   Duration [22m 651ms[2m (transform 80ms, setup 147ms, import 59ms, tests 9ms, environment 0ms)[22m

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/domain/skills/grade4/oa.test.ts [22m[34mx1 [34m[39m
       [2m Filename pattern: [22m[34msrc/domain/skills/grade4/oa.test.ts[39m

 [31mÎ“Â¥Â»[39m src/domain/skills/grade4/oa.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 12[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates List Factors problems correctly[32m 4[2mms[22m[39m
       [32mÎ“Â£Ã´[39m covers perfect squares in getFactors[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates Prime/Composite problems (Prime case)[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates Prime/Composite problems (Composite case)[32m 0[2mms[22m[39m
[31m       [31mâ”œÃ¹[31m triggers FactorsMultiples misconceptions[39m[32m 3[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates Multiples problems (Mode C)[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates valid additive sequence[32m 1[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates valid subtract sequence[32m 0[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates valid comparison word problems and covers misconception[32m 1[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates arithmetic mode problems[32m 1[2mms[22m[39m
       [32mÎ“Â£Ã´[39m generates remainder interpretation problems and covers misconception[32m 0[2mms[22m[39m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Tests 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/domain/skills/grade4/oa.test.ts > grade4-oa generator > FactorsMultiplesGenerator > triggers FactorsMultiples misconceptions
AssertionError: expected undefined to be defined
 Î“Â¥Â» src/domain/skills/grade4/oa.test.ts:86:20

     84|         (m) => m.error_tag === "confuse_factors_multiples"
     85|       );
     86|       expect(misc).toBeDefined();
       |                    ^
     87|       if (misc?.trigger.kind === "regex") {
     88|         const number = item.problem_content.variables?.number as numbeÎ“Ã‡Âª
[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m10 passed[39m[22m[90m (11)[39m
[2m   Start at [22m 12:22:46
[2m   Duration [22m 272ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»

c[3J[1m[44m RERUN [49m[22m [34m[2msrc/domain/skills/grade4/oa.test.ts [22m[34mx2 [34m[39m
       [2m Filename pattern: [22m[34msrc/domain/skills/grade4/oa.test.ts[39m


Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â» Failed Suites 1 Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»

 FAIL  src/domain/skills/grade4/oa.test.ts [ src/domain/skills/grade4/oa.test.ts ]
Error: Transform failed with 1 error:
C:/Users/dmedl/Projects/MathFlow/src/domain/skills/grade4/oa.test.ts:99:12: ERROR: The symbol "rng" has already been declared
  Plugin: vite:esbuild
  File: C:/Users/dmedl/Projects/MathFlow/src/domain/skills/grade4/oa.test.ts:99:12
  
  The symbol "rng" has already been declared
  97 |        // isPrimeTarget = 0.4 -> false (Composite)
  98 |        // composites[floor(0.1 * 11)] = 6
  99 |        const rng = createMockRng([0.5, 0.4, 0.1]);
     |              ^
  100|        const itemB = FactorsMultiplesGenerator.generate(0.1, rng);
  101|        const miscB = itemB.misconceptions.find(
  
 Î“Â¥Â» failureErrorWithLog node_modules/esbuild/lib/main.js:1467:15
 Î“Â¥Â» node_modules/esbuild/lib/main.js:736:50
 Î“Â¥Â» responseCallbacks.<computed> node_modules/esbuild/lib/main.js:603:9
 Î“Â¥Â» handleIncomingPacket node_modules/esbuild/lib/main.js:658:12
 Î“Â¥Â» Socket.readFromStdout node_modules/esbuild/lib/main.js:581:7

Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»Î“Ã„Â»[1/1]Î“Ã„Â»


[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 12:28:12
[2m   Duration [22m 293ms

[1m[41m FAIL [49m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/domain/skills/grade4/oa.test.ts [22m[34mx3 [34m[39m
       [2m Filename pattern: [22m[34msrc/domain/skills/grade4/oa.test.ts[39m

 [32mÎ“Â£Ã´[39m src/domain/skills/grade4/oa.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 9[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m11 passed[39m[22m[90m (11)[39m
[2m   Start at [22m 12:28:18
[2m   Duration [22m 376ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2msrc/domain/skills/grade4/oa.test.ts [22m[34mx4 [34m[39m
       [2m Filename pattern: [22m[34msrc/domain/skills/grade4/oa.test.ts[39m

 [32mÎ“Â£Ã´[39m src/domain/skills/grade4/oa.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 10[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m17 passed[39m[22m[90m (17)[39m
[2m   Start at [22m 12:37:38
[2m   Duration [22m 293ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[44m RERUN [49m[22m [34m[2mpackage.json [22m[34mx5 [34m[39m
       [2m Filename pattern: [22m[34msrc/domain/skills/grade4/oa.test.ts[39m

 [32mÎ“Â£Ã´[39m src/domain/skills/grade4/oa.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 10[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m17 passed[39m[22m[90m (17)[39m
[2m   Start at [22m 12:42:48
[2m   Duration [22m 641ms

[1m[42m PASS [49m[22m [32mWaiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
